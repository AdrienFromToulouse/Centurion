<div class="grid medias grid-sortable">
    <div class="row row-template">
        <div class="col col-picture"></div>
        <div class="col col-title"></div>
        <div class="col col-actions"></div>
    </div>

    <?php foreach ($this->result as $id => $row):
    if (isset($this->coverName)) :
        $cover = $row['row']->{'get'.$this->coverName.'OrPx'}();
    else :
        $cover = $row['row'];
    endif;

    if (isset($this->popup)) :
        $editUrl = 'javascript:mySubmit(\'' . $this->serverUrl($cover->getStaticUrl()) . '\', \''.$this->escape($cover->filename).'\', \'\')';
    else :
        $editUrl = $this->url(array('id' => $row['row']->id, 'action' => 'get', 'saving' => null));
    endif;

    $infos = isset($row['infos']) ? $row['infos'] : null;  
    ?>
        <div class="row">
            <div class="col col-picture" title="<?php echo $row['row']->filename ?>">
                <div style="background: url('<?php echo $this->escape($cover->getStaticUrl(array('cropcenterresize' => array('width' => 174, 'height' => 94))))?>'); width: 174px; height: 94px;" class="picture">
                </div>
            </div>
            <div class="col col-title">
                <input type="checkbox" value="<?php echo $id;?>" name="rowId[]">
                <a href="<?php echo $editUrl;?>" class="edit" title="<?php echo $this->escape($row['row']->filename) ?>"><?php echo $this->smartTextCrop($row['row']->filename, 20, true) ?></a>
            </div>
            <?php if($infos): ?>
            <div class="col col-infos">
                <?php echo $row['infos'] ?>
            </div>
            <?php endif; //infos ?>
            <div class="col col-actions">
            <?php
                $this->row = $row['row'];
                echo $this->partial($this->_selectScript(array(sprintf('%s/_actions.phtml', $this->controller),
                                         'grid/_actions.phtml')), $this); ?>
            </div>
        </div>
    <?php endforeach; ?>
    <div class="clear"></div>
</div>

